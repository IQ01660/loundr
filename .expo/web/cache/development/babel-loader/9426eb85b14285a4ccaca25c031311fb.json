{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/ikramgabiyev/react-native-workspace/loundr/node_modules/react-native-credit-card-input/src/connectToState.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CCFieldFormatter from \"./CCFieldFormatter\";\nimport CCFieldValidator from \"./CCFieldValidator\";\nimport compact from \"lodash.compact\";\nexport var InjectedProps = {\n  focused: PropTypes.string,\n  values: PropTypes.object.isRequired,\n  status: PropTypes.object.isRequired,\n  onFocus: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onBecomeEmpty: PropTypes.func.isRequired,\n  onBecomeValid: PropTypes.func.isRequired,\n  requiresName: PropTypes.bool,\n  requiresCVC: PropTypes.bool,\n  requiresPostalCode: PropTypes.bool\n};\nexport default function connectToState(CreditCardInput) {\n  var StateConnection = function (_Component) {\n    _inherits(StateConnection, _Component);\n\n    var _super = _createSuper(StateConnection);\n\n    function StateConnection() {\n      var _this;\n\n      _classCallCheck(this, StateConnection);\n\n      _this = _super.call(this);\n\n      _this.componentDidMount = function () {\n        return setTimeout(function () {\n          _this.props.autoFocus && _this.focus(\"number\");\n        });\n      };\n\n      _this.setValues = function (values) {\n        var newValues = _objectSpread(_objectSpread({}, _this.state.values), values);\n\n        var displayedFields = _this._displayedFields();\n\n        var formattedValues = new CCFieldFormatter(displayedFields).formatValues(newValues);\n        var validation = new CCFieldValidator(displayedFields, _this.props.validatePostalCode).validateValues(formattedValues);\n\n        var newState = _objectSpread({\n          values: formattedValues\n        }, validation);\n\n        _this.setState(newState);\n\n        _this.props.onChange(newState);\n      };\n\n      _this.focus = function () {\n        var field = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"number\";\n\n        _this.setState({\n          focused: field\n        });\n      };\n\n      _this._displayedFields = function () {\n        var _this$props = _this.props,\n            requiresName = _this$props.requiresName,\n            requiresCVC = _this$props.requiresCVC,\n            requiresPostalCode = _this$props.requiresPostalCode;\n        return compact([\"number\", \"expiry\", requiresCVC ? \"cvc\" : null, requiresName ? \"name\" : null, requiresPostalCode ? \"postalCode\" : null]);\n      };\n\n      _this._focusPreviousField = function (field) {\n        var displayedFields = _this._displayedFields();\n\n        var fieldIndex = displayedFields.indexOf(field);\n        var previousField = displayedFields[fieldIndex - 1];\n        if (previousField) _this.focus(previousField);\n      };\n\n      _this._focusNextField = function (field) {\n        if (field === \"name\") return;\n\n        var displayedFields = _this._displayedFields();\n\n        var fieldIndex = displayedFields.indexOf(field);\n        var nextField = displayedFields[fieldIndex + 1];\n        if (nextField) _this.focus(nextField);\n      };\n\n      _this._change = function (field, value) {\n        _this.setValues(_defineProperty({}, field, value));\n      };\n\n      _this._onFocus = function (field) {\n        _this.focus(field);\n\n        _this.props.onFocus(field);\n      };\n\n      _this.state = {\n        focused: \"\",\n        values: {},\n        status: {}\n      };\n      return _this;\n    }\n\n    _createClass(StateConnection, [{\n      key: \"render\",\n      value: function render() {\n        return React.createElement(CreditCardInput, _extends({}, this.props, this.state, {\n          onFocus: this._onFocus,\n          onChange: this._change,\n          onBecomeEmpty: this._focusPreviousField,\n          onBecomeValid: this._focusNextField,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 9\n          }\n        }));\n      }\n    }]);\n\n    return StateConnection;\n  }(Component);\n\n  StateConnection.propTypes = {\n    autoFocus: PropTypes.bool,\n    onChange: PropTypes.func.isRequired,\n    onFocus: PropTypes.func,\n    requiresName: PropTypes.bool,\n    requiresCVC: PropTypes.bool,\n    requiresPostalCode: PropTypes.bool,\n    validatePostalCode: PropTypes.func\n  };\n  StateConnection.defaultProps = {\n    autoFocus: false,\n    onChange: function onChange() {},\n    onFocus: function onFocus() {},\n    requiresName: false,\n    requiresCVC: true,\n    requiresPostalCode: false,\n    validatePostalCode: function validatePostalCode() {\n      var postalCode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      return postalCode.match(/^\\d{6}$/) ? \"valid\" : postalCode.length > 6 ? \"invalid\" : \"incomplete\";\n    }\n  };\n  return StateConnection;\n}","map":{"version":3,"sources":["/Users/ikramgabiyev/react-native-workspace/loundr/node_modules/react-native-credit-card-input/src/connectToState.js"],"names":["React","Component","PropTypes","CCFieldFormatter","CCFieldValidator","compact","InjectedProps","focused","string","values","object","isRequired","status","onFocus","func","onChange","onBecomeEmpty","onBecomeValid","requiresName","bool","requiresCVC","requiresPostalCode","connectToState","CreditCardInput","StateConnection","componentDidMount","setTimeout","props","autoFocus","focus","setValues","newValues","state","displayedFields","_displayedFields","formattedValues","formatValues","validation","validatePostalCode","validateValues","newState","setState","field","_focusPreviousField","fieldIndex","indexOf","previousField","_focusNextField","nextField","_change","value","_onFocus","propTypes","defaultProps","postalCode","match","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CCFieldFormatter from \"./CCFieldFormatter\";\nimport CCFieldValidator from \"./CCFieldValidator\";\nimport compact from \"lodash.compact\";\n\nexport const InjectedProps = {\n  focused: PropTypes.string,\n  values: PropTypes.object.isRequired,\n  status: PropTypes.object.isRequired,\n  onFocus: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onBecomeEmpty: PropTypes.func.isRequired,\n  onBecomeValid: PropTypes.func.isRequired,\n  requiresName: PropTypes.bool,\n  requiresCVC: PropTypes.bool,\n  requiresPostalCode: PropTypes.bool,\n};\n\nexport default function connectToState(CreditCardInput) {\n  class StateConnection extends Component {\n    static propTypes = {\n      autoFocus: PropTypes.bool,\n      onChange: PropTypes.func.isRequired,\n      onFocus: PropTypes.func,\n      requiresName: PropTypes.bool,\n      requiresCVC: PropTypes.bool,\n      requiresPostalCode: PropTypes.bool,\n      validatePostalCode: PropTypes.func,\n    };\n\n    static defaultProps = {\n      autoFocus: false,\n      onChange: () => {},\n      onFocus: () => {},\n      requiresName: false,\n      requiresCVC: true,\n      requiresPostalCode: false,\n      validatePostalCode: (postalCode = \"\") => {\n        return postalCode.match(/^\\d{6}$/) ? \"valid\" :\n               postalCode.length > 6 ? \"invalid\" :\n               \"incomplete\";\n      },\n    };\n\n    constructor() {\n      super();\n      this.state = {\n        focused: \"\",\n        values: {},\n        status: {},\n      };\n    }\n\n    componentDidMount = () => setTimeout(() => { // Hacks because componentDidMount happens before component is rendered\n      this.props.autoFocus && this.focus(\"number\");\n    });\n\n    setValues = values => {\n      const newValues = { ...this.state.values, ...values };\n      const displayedFields = this._displayedFields();\n      const formattedValues = (new CCFieldFormatter(displayedFields)).formatValues(newValues);\n      const validation = (new CCFieldValidator(displayedFields, this.props.validatePostalCode)).validateValues(formattedValues);\n      const newState = { values: formattedValues, ...validation };\n\n      this.setState(newState);\n      this.props.onChange(newState);\n    };\n\n    focus = (field = \"number\") => {\n      this.setState({ focused: field });\n    };\n\n    _displayedFields = () => {\n      const { requiresName, requiresCVC, requiresPostalCode } = this.props;\n      return compact([\n        \"number\",\n        \"expiry\",\n        requiresCVC ? \"cvc\" : null,\n        requiresName ? \"name\" : null,\n        requiresPostalCode ? \"postalCode\" : null,\n      ]);\n    };\n\n    _focusPreviousField = field => {\n      const displayedFields = this._displayedFields();\n      const fieldIndex = displayedFields.indexOf(field);\n      const previousField = displayedFields[fieldIndex - 1];\n      if (previousField) this.focus(previousField);\n    };\n\n    _focusNextField = field => {\n      if (field === \"name\") return;\n      // Should not focus to the next field after name (e.g. when requiresName & requiresPostalCode are true\n      // because we can't determine if the user has completed their name or not)\n\n      const displayedFields = this._displayedFields();\n      const fieldIndex = displayedFields.indexOf(field);\n      const nextField = displayedFields[fieldIndex + 1];\n      if (nextField) this.focus(nextField);\n    };\n\n    _change = (field, value) => {\n      this.setValues({ [field]: value });\n    };\n\n    _onFocus = (field) => {\n      this.focus(field);\n      this.props.onFocus(field);\n    };\n\n    render() {\n      return (\n        <CreditCardInput\n          {...this.props}\n          {...this.state}\n          onFocus={this._onFocus}\n          onChange={this._change}\n          onBecomeEmpty={this._focusPreviousField}\n          onBecomeValid={this._focusNextField} />\n      );\n    }\n  }\n\n  return StateConnection;\n}\n"]},"metadata":{},"sourceType":"module"}