{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar isBlank = function isBlank(string) {\n  return null == string || !/\\S/.test(string);\n};\n\nvar notBlank = function notBlank(string) {\n  return !isBlank(string);\n};\n\nvar parseHeaders = function parseHeaders(xhr) {\n  return (xhr.getAllResponseHeaders() || '').split(/\\r?\\n/).filter(notBlank).reduce(function (headers, headerString) {\n    var header = headerString.split(\":\")[0];\n    headers[header] = xhr.getResponseHeader(header);\n    return headers;\n  }, {});\n};\n\nvar buildResponseObject = function buildResponseObject(xhr) {\n  var headers = {};\n\n  try {\n    headers = parseHeaders(xhr);\n  } catch (e) {}\n\n  ;\n  return {\n    status: xhr.status,\n    text: xhr.responseText,\n    headers: headers\n  };\n};\n\nvar buildResponseHandler = function buildResponseHandler(xhr, resolve, reject) {\n  return function () {\n    var fn = xhr.status === 0 ? reject : resolve;\n    fn(buildResponseObject(xhr));\n  };\n};\n\nvar decorateProgressFn = function decorateProgressFn(fn) {\n  return function (e) {\n    e.percent = e.loaded / e.total;\n    return fn(e);\n  };\n};\n\nvar Request = exports.Request = function () {\n  _createClass(Request, null, [{\n    key: \"create\",\n    value: function create() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return new (Function.prototype.bind.apply(this, [null].concat(args)))();\n    }\n  }]);\n\n  function Request(url, method) {\n    var _this = this;\n\n    var attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Request);\n\n    this._xhr = new Request.XMLHttpRequest();\n    this._formData = new Request.FormData();\n\n    this._xhr.open(method, url);\n\n    this._promise = new Promise(function (resolve, reject) {\n      _this._xhr.onload = buildResponseHandler(_this._xhr, resolve, reject);\n      _this._xhr.onerror = buildResponseHandler(_this._xhr, resolve, reject);\n    });\n    Object.keys(attrs).forEach(function (k) {\n      return _this.set(k, attrs[k]);\n    });\n    Object.keys(headers).forEach(function (k) {\n      return _this.header(k, headers[k]);\n    });\n  }\n\n  _createClass(Request, [{\n    key: \"header\",\n    value: function header(key, value) {\n      this._xhr.setRequestHeader(key, value);\n\n      return this;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      this._formData.append(key, value);\n\n      return this;\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      this._xhr.send(this._formData);\n\n      return this;\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._xhr.abort();\n\n      return this;\n    }\n  }, {\n    key: \"progress\",\n    value: function progress(fn) {\n      if (this._xhr.upload) {\n        this._xhr.upload.onprogress = decorateProgressFn(fn);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"then\",\n    value: function then() {\n      var _promise;\n\n      this._promise = (_promise = this._promise).then.apply(_promise, arguments);\n      return this;\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch() {\n      var _promise2;\n\n      this._promise = (_promise2 = this._promise).catch.apply(_promise2, arguments);\n      return this;\n    }\n  }]);\n\n  return Request;\n}();\n\nRequest.FormData = FormData;\nRequest.XMLHttpRequest = XMLHttpRequest;","map":{"version":3,"sources":["/Users/ikramgabiyev/react-native-workspace/loundr/node_modules/react-native-aws3/lib/Request.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","isBlank","string","test","notBlank","parseHeaders","xhr","getAllResponseHeaders","split","filter","reduce","headers","headerString","header","getResponseHeader","buildResponseObject","e","status","text","responseText","buildResponseHandler","resolve","reject","fn","decorateProgressFn","percent","loaded","total","Request","create","_len","arguments","args","Array","_key","Function","bind","apply","concat","url","method","_this","attrs","undefined","_xhr","XMLHttpRequest","_formData","FormData","open","_promise","Promise","onload","onerror","keys","forEach","k","set","setRequestHeader","append","send","abort","progress","upload","onprogress","then","_catch","_promise2","catch"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Request\n */\n\nvar isBlank = function isBlank(string) {\n  return null == string || !/\\S/.test(string);\n};\n\nvar notBlank = function notBlank(string) {\n  return !isBlank(string);\n};\n\nvar parseHeaders = function parseHeaders(xhr) {\n  return (xhr.getAllResponseHeaders() || '').split(/\\r?\\n/).filter(notBlank).reduce(function (headers, headerString) {\n    var header = headerString.split(\":\")[0];\n    headers[header] = xhr.getResponseHeader(header);\n    return headers;\n  }, {});\n};\n\nvar buildResponseObject = function buildResponseObject(xhr) {\n  var headers = {};\n  try {\n    headers = parseHeaders(xhr);\n  } catch (e) {};\n  return {\n    status: xhr.status,\n    text: xhr.responseText,\n    headers: headers\n  };\n};\n\nvar buildResponseHandler = function buildResponseHandler(xhr, resolve, reject) {\n  return function () {\n    var fn = xhr.status === 0 ? reject : resolve;\n    fn(buildResponseObject(xhr));\n  };\n};\n\nvar decorateProgressFn = function decorateProgressFn(fn) {\n  return function (e) {\n    e.percent = e.loaded / e.total;\n    return fn(e);\n  };\n};\n\nvar Request = exports.Request = function () {\n  _createClass(Request, null, [{\n    key: \"create\",\n    value: function create() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return new (Function.prototype.bind.apply(this, [null].concat(args)))();\n    }\n  }]);\n\n  function Request(url, method) {\n    var _this = this;\n\n    var attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var headers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Request);\n\n    this._xhr = new Request.XMLHttpRequest();\n    this._formData = new Request.FormData();\n\n    this._xhr.open(method, url);\n\n    this._promise = new Promise(function (resolve, reject) {\n      _this._xhr.onload = buildResponseHandler(_this._xhr, resolve, reject);\n      _this._xhr.onerror = buildResponseHandler(_this._xhr, resolve, reject);\n    });\n\n    Object.keys(attrs).forEach(function (k) {\n      return _this.set(k, attrs[k]);\n    });\n    Object.keys(headers).forEach(function (k) {\n      return _this.header(k, headers[k]);\n    });\n  }\n\n  _createClass(Request, [{\n    key: \"header\",\n    value: function header(key, value) {\n      this._xhr.setRequestHeader(key, value);\n      return this;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      this._formData.append(key, value);\n      return this;\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      this._xhr.send(this._formData);\n      return this;\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._xhr.abort();\n      return this;\n    }\n  }, {\n    key: \"progress\",\n    value: function progress(fn) {\n      if (this._xhr.upload) {\n        this._xhr.upload.onprogress = decorateProgressFn(fn);\n      }\n      return this;\n    }\n  }, {\n    key: \"then\",\n    value: function then() {\n      var _promise;\n\n      this._promise = (_promise = this._promise).then.apply(_promise, arguments);\n      return this;\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch() {\n      var _promise2;\n\n      this._promise = (_promise2 = this._promise).catch.apply(_promise2, arguments);\n      return this;\n    }\n  }]);\n\n  return Request;\n}();\n\nRequest.FormData = FormData;\nRequest.XMLHttpRequest = XMLHttpRequest;"]},"metadata":{},"sourceType":"script"}