{"ast":null,"code":"'use strict';\n\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/ikramgabiyev/react-native-workspace/loundr/node_modules/react-native-flip-card/lib/FlipCard.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ViewPropTypes from \"react-native-web/dist/exports/ViewPropTypes\";\nimport S from \"./Style.js\";\n\nvar FlipCard = function (_Component) {\n  _inherits(FlipCard, _Component);\n\n  var _super = _createSuper(FlipCard);\n\n  function FlipCard(props) {\n    var _this;\n\n    _classCallCheck(this, FlipCard);\n\n    _this = _super.call(this, props);\n    var isFlipped = _this.props.alignHeight || _this.props.alignWidth ? !props.flip : props.flip;\n    _this.state = {\n      isFlipped: isFlipped,\n      isFlipping: false,\n      rotate: new Animated.Value(Number(props.flip)),\n      mesured: false,\n      height: 0,\n      width: 0,\n      face: {\n        width: 0,\n        height: 0\n      },\n      back: {\n        width: 0,\n        height: 0\n      }\n    };\n    return _this;\n  }\n\n  _createClass(FlipCard, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.flip !== this.props.flip) {\n        this._toggleCard();\n      }\n    }\n  }, {\n    key: \"_toggleCard\",\n    value: function _toggleCard() {\n      this.setState({\n        isFlipping: true\n      });\n      this.props.onFlipStart(this.state.isFlipped);\n\n      this._animation(!this.state.isFlipped);\n    }\n  }, {\n    key: \"_animation\",\n    value: function _animation(isFlipped) {\n      var _this2 = this;\n\n      if (!this.timer) {\n        this.timer = setTimeout(function () {\n          _this2.setState({\n            isFlipped: !_this2.state.isFlipped\n          });\n\n          _this2.timer = null;\n        }, 120);\n      }\n\n      Animated.spring(this.state.rotate, {\n        toValue: Number(isFlipped),\n        friction: this.props.friction,\n        useNativeDriver: this.props.useNativeDriver\n      }).start(function (param) {\n        _this2.setState({\n          isFlipping: false\n        });\n\n        _this2.props.onFlipEnd(_this2.state.isFlipped);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.alignHeight || this.props.alignWidth) {\n        this.measureOtherSideTimeout = setTimeout(this.measureOtherSide.bind(this), 32);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.measureOtherSideTimeout);\n    }\n  }, {\n    key: \"measureOtherSide\",\n    value: function measureOtherSide() {\n      this.setState({\n        isFlipped: !this.state.isFlipped,\n        mesured: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var c = this.props.children;\n      var transform = this.props.perspective ? [{\n        perspective: this.props.perspective\n      }] : [];\n      var render_side = false;\n\n      if (this.props.flipHorizontal) {\n        transform.push({\n          rotateY: this.state.rotate.interpolate({\n            inputRange: [0, 1],\n            outputRange: ['0deg', '180deg']\n          })\n        });\n      }\n\n      if (this.props.flipVertical) {\n        transform.push({\n          rotateX: this.state.rotate.interpolate({\n            inputRange: [0, 1],\n            outputRange: ['0deg', '180deg']\n          })\n        });\n      }\n\n      if (this.state.isFlipped) {\n        render_side = React.createElement(Back, {\n          style: [this.state.height > 0 && {\n            height: this.state.height\n          }, this.state.width > 0 && {\n            width: this.state.width\n          }],\n          flipHorizontal: this.props.flipHorizontal,\n          flipVertical: this.props.flipVertical,\n          perspective: this.props.perspective,\n          onLayout: function onLayout(event) {\n            var _event$nativeEvent$la = event.nativeEvent.layout,\n                x = _event$nativeEvent$la.x,\n                y = _event$nativeEvent$la.y,\n                width = _event$nativeEvent$la.width,\n                height = _event$nativeEvent$la.height;\n\n            var _update = _extends(_this3.state.back, {\n              width: width,\n              height: height\n            });\n\n            _this3.setState({\n              back: _update\n            });\n\n            if (_this3.state.mesured) {\n              if (_this3.props.alignHeight) {\n                _this3.setState({\n                  height: Math.max(_this3.state.face.height, _this3.state.back.height)\n                });\n              }\n\n              if (_this3.props.alignWidth) {\n                _this3.setState({\n                  width: Math.max(_this3.state.face.width, _this3.state.back.width)\n                });\n              }\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 9\n          }\n        }, c[1]);\n      } else {\n        render_side = React.createElement(Face, {\n          style: [this.state.height > 0 && {\n            height: this.state.height\n          }, this.state.width > 0 && {\n            width: this.state.width\n          }],\n          onLayout: function onLayout(event) {\n            var _event$nativeEvent$la2 = event.nativeEvent.layout,\n                x = _event$nativeEvent$la2.x,\n                y = _event$nativeEvent$la2.y,\n                width = _event$nativeEvent$la2.width,\n                height = _event$nativeEvent$la2.height;\n\n            var _update = _extends(_this3.state.face, {\n              width: width,\n              height: height\n            });\n\n            _this3.setState({\n              face: _update\n            });\n\n            if (_this3.state.mesured) {\n              if (_this3.props.alignHeight) {\n                _this3.setState({\n                  height: Math.max(_this3.state.face.height, _this3.state.back.height)\n                });\n              }\n\n              if (_this3.props.alignWidth) {\n                _this3.setState({\n                  width: Math.max(_this3.state.face.width, _this3.state.back.width)\n                });\n              }\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 9\n          }\n        }, c[0]);\n      }\n\n      if (this.props.clickable) {\n        var opacity = 0;\n\n        if ((this.props.alignHeight || this.props.alignWidth) && this.state.mesured || !(this.props.alignHeight || this.props.alignWidth)) {\n          opacity = 1;\n        }\n\n        return React.createElement(TouchableOpacity, {\n          style: {\n            flex: 1\n          },\n          testID: this.props.testID,\n          activeOpacity: 1,\n          onPress: function onPress() {\n            _this3._toggleCard();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 9\n          }\n        }, React.createElement(Animated.View, _extends({}, this.props, {\n          style: [S.flipCard, {\n            transform: transform,\n            opacity: opacity\n          }, this.props.style],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 11\n          }\n        }), render_side));\n      } else {\n        return React.createElement(Animated.View, _extends({}, this.props, {\n          style: [S.flipCard, {\n            transform: transform\n          }, this.props.style],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 9\n          }\n        }), render_side);\n      }\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (prevState.isFlipped !== nextProps.flip) {\n        return {\n          flip: nextProps.flip\n        };\n      } else return null;\n    }\n  }]);\n\n  return FlipCard;\n}(Component);\n\nFlipCard.propTypes = {\n  style: ViewPropTypes.style\n};\nexport { FlipCard as default };\nFlipCard.propTypes = {\n  flip: PropTypes.bool,\n  friction: PropTypes.number,\n  perspective: PropTypes.number,\n  flipHorizontal: PropTypes.bool,\n  flipVertical: PropTypes.bool,\n  clickable: PropTypes.bool,\n  onFlipEnd: PropTypes.func,\n  onFlipStart: PropTypes.func,\n  alignHeight: PropTypes.bool,\n  alignWidth: PropTypes.bool,\n  useNativeDriver: PropTypes.bool,\n  children: function children(props, propName, componentName) {\n    var prop = props[propName];\n\n    if (React.Children.count(prop) !== 2) {\n      return new Error('`' + componentName + '` ' + 'should contain exactly two children. ' + 'The first child represents the front of the card. ' + 'The second child represents the back of the card.');\n    }\n  }\n};\nFlipCard.defaultProps = {\n  flip: false,\n  friction: 6,\n  perspective: 1000,\n  flipHorizontal: false,\n  flipVertical: true,\n  clickable: true,\n  onFlipEnd: function onFlipEnd() {},\n  onFlipStart: function onFlipStart() {},\n  alignHeight: false,\n  alignWidth: false,\n  useNativeDriver: true\n};\nexport var Face = function (_Component2) {\n  _inherits(Face, _Component2);\n\n  var _super2 = _createSuper(Face);\n\n  function Face() {\n    _classCallCheck(this, Face);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Face, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: [S.face, this.props.style],\n        onLayout: this.props.onLayout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 7\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return Face;\n}(Component);\nFace.propTypes = {\n  children: function children(props, propName, componentName) {}\n};\nexport var Back = function (_Component3) {\n  _inherits(Back, _Component3);\n\n  var _super3 = _createSuper(Back);\n\n  function Back() {\n    _classCallCheck(this, Back);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Back, [{\n    key: \"render\",\n    value: function render() {\n      var transform = [];\n\n      if (this.props.flipHorizontal) {\n        transform.push({\n          scaleX: -1\n        });\n\n        if (Platform.OS === \"android\") {\n          transform.push({\n            perspective: this.props.perspective\n          });\n        }\n      }\n\n      if (this.props.flipVertical) {\n        transform.push({\n          scaleY: -1\n        });\n\n        if (Platform.OS === \"android\") {\n          transform.push({\n            perspective: this.props.perspective\n          });\n        }\n      }\n\n      return React.createElement(View, {\n        style: [S.back, this.props.style, {\n          transform: transform\n        }],\n        onLayout: this.props.onLayout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 7\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return Back;\n}(Component);\nBack.defaultProps = {\n  flipHorizontal: false,\n  flipVertical: true,\n  perspective: 1000\n};\nBack.propTypes = {\n  flipHorizontal: PropTypes.bool,\n  flipVertical: PropTypes.bool,\n  perspective: PropTypes.number,\n  children: function children(props, propName, componentName) {}\n};","map":{"version":3,"sources":["/Users/ikramgabiyev/react-native-workspace/loundr/node_modules/react-native-flip-card/lib/FlipCard.js"],"names":["React","Component","PropTypes","S","FlipCard","props","isFlipped","alignHeight","alignWidth","flip","state","isFlipping","rotate","Animated","Value","Number","mesured","height","width","face","back","prevProps","_toggleCard","setState","onFlipStart","_animation","timer","setTimeout","spring","toValue","friction","useNativeDriver","start","param","onFlipEnd","measureOtherSideTimeout","measureOtherSide","bind","clearTimeout","c","children","transform","perspective","render_side","flipHorizontal","push","rotateY","interpolate","inputRange","outputRange","flipVertical","rotateX","event","nativeEvent","layout","x","y","_update","Math","max","clickable","opacity","flex","testID","flipCard","style","nextProps","prevState","propTypes","ViewPropTypes","bool","number","func","propName","componentName","prop","Children","count","Error","defaultProps","Face","onLayout","Back","scaleX","Platform","OS","scaleY"],"mappings":"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","sourcesContent":["'use strict'\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  View,\n  TouchableOpacity,\n  Animated,\n  Platform,\n  ViewPropTypes\n} from \"react-native\";\n\nimport S from './Style.js'\n\nexport default class FlipCard extends Component {\n  static propTypes = {\n    style: ViewPropTypes.style\n  }\n\n  constructor (props) {\n    super(props)\n\n    // set reversed boolean for detect other side size\n    const isFlipped = (this.props.alignHeight || this.props.alignWidth) ? !props.flip : props.flip;\n\n    this.state = {\n      isFlipped: isFlipped,\n      isFlipping: false,\n      rotate: new Animated.Value(Number(props.flip)),\n      mesured: false, // the flag to check whether it is measured or not.\n      height: 0,\n      width: 0,\n      face: { width: 0, height: 0 },\n      back: { width: 0, height: 0 }\n    }\n  }\n  static getDerivedStateFromProps (nextProps, prevState) {\n    if (prevState.isFlipped !== nextProps.flip) {\n      return { flip: nextProps.flip }\n    } else return null\n  }\n  componentDidUpdate (prevProps) {\n    if (prevProps.flip !== this.props.flip) {\n      this._toggleCard()\n    }\n  }\n  _toggleCard () {\n    this.setState({isFlipping: true})\n    this.props.onFlipStart(this.state.isFlipped)\n    this._animation(!this.state.isFlipped)\n  }\n  _animation (isFlipped) {\n    if (!this.timer) {\n      this.timer = setTimeout(() => {\n        this.setState({isFlipped: !this.state.isFlipped})\n        this.timer = null\n      }, 120)\n    }\n    Animated.spring(this.state.rotate,\n     {\n        toValue: Number(isFlipped),\n        friction: this.props.friction,\n        useNativeDriver: this.props.useNativeDriver\n      }\n    ).start((param) => {\n      this.setState({isFlipping: false})\n      this.props.onFlipEnd(this.state.isFlipped)\n    })\n  }\n\n  componentDidMount () {\n    if (this.props.alignHeight || this.props.alignWidth) {\n      // need to check the other side width or height or both\n      this.measureOtherSideTimeout = setTimeout(this.measureOtherSide.bind(this), 32);\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.measureOtherSideTimeout);\n  }\n\n  measureOtherSide () {\n    this.setState({\n      isFlipped: !this.state.isFlipped,\n      mesured: true\n    })\n  }\n\n  render () {\n    var c = this.props.children;\n    var transform = this.props.perspective ? [{ perspective: this.props.perspective }] : []\n    var render_side = false\n\n    if (this.props.flipHorizontal) {\n      transform.push(\n        {rotateY: this.state.rotate.interpolate({\n          inputRange: [0, 1],\n          outputRange: [ '0deg', '180deg' ]\n        })}\n      )\n    }\n\n    if (this.props.flipVertical) {\n      transform.push(\n        {rotateX: this.state.rotate.interpolate({\n          inputRange: [0, 1],\n          outputRange: [ '0deg', '180deg' ]\n        })}\n      )\n    }\n\n    if (this.state.isFlipped) {\n      render_side = (\n        <Back\n          style={[ this.state.height > 0 && {height: this.state.height}, this.state.width > 0 && {width: this.state.width}]}\n          flipHorizontal={this.props.flipHorizontal}\n          flipVertical={this.props.flipVertical}\n          perspective={this.props.perspective}\n          onLayout={(event) => {\n            var {x, y, width, height} = event.nativeEvent.layout\n            var _update = Object.assign(this.state.back, {width: width, height: height})\n            this.setState({back: _update})\n            if (this.state.mesured) {\n              if (this.props.alignHeight) {\n                this.setState({height: Math.max(this.state.face.height, this.state.back.height)})\n              }\n              if (this.props.alignWidth) {\n                this.setState({width: Math.max(this.state.face.width, this.state.back.width)})\n              }\n            }\n          }}\n        >\n          {c[1]}\n        </Back>\n      )\n    } else {\n      render_side = (\n        <Face\n          style={[ this.state.height > 0 && { height: this.state.height }, this.state.width > 0 && { width: this.state.width }]}\n          onLayout={(event) => {\n            var {x, y, width, height} = event.nativeEvent.layout;\n            var _update = Object.assign(this.state.face, {width: width, height: height})\n            this.setState({face: _update})\n            if (this.state.mesured) {\n              if (this.props.alignHeight) {\n                this.setState({height: Math.max(this.state.face.height, this.state.back.height)})\n              }\n              if (this.props.alignWidth) {\n                this.setState({width: Math.max(this.state.face.width, this.state.back.width)})\n              }\n            }\n          }}\n        >\n          {c[0]}\n        </Face>\n      )\n    }\n\n    // FIX: ScrollView inside Flip Card not scrollable\n    // TODO: Replace below fix with by using \"disabled\" function (RN 0.21 exclusive)\n    // REF: https://github.com/facebook/react-native/pull/5931\n    //      https://github.com/facebook/react-native/issues/2103\n    if (this.props.clickable) {\n      let opacity = 0;\n      if ( ((this.props.alignHeight || this.props.alignWidth) && this.state.mesured) ||\n        !(this.props.alignHeight || this.props.alignWidth))  {\n        // if you set alignXXX property, we show this side after mesured\n        // Otherwise, it's showed immediately\n        opacity = 1;\n      }\n        return (\n        <TouchableOpacity\n          style={{flex:1}}\n          testID={this.props.testID}\n          activeOpacity={1}\n          onPress={() => { this._toggleCard(); }}\n        >\n          <Animated.View\n            {...this.props}\n            style={[\n              S.flipCard,\n              {\n                transform,\n                opacity,\n              },\n              this.props.style\n            ]}\n          >\n            {render_side}\n          </Animated.View>\n        </TouchableOpacity>\n      )\n    } else {\n      return (\n        <Animated.View\n          {...this.props}\n          style={[S.flipCard,\n          {transform: transform},\n          this.props.style\n          ]}\n        >\n          {render_side}\n        </Animated.View>\n      )\n    }\n  }\n}\nFlipCard.propTypes = {\n  flip: PropTypes.bool,\n  friction: PropTypes.number,\n  perspective: PropTypes.number,\n  flipHorizontal: PropTypes.bool,\n  flipVertical: PropTypes.bool,\n  clickable: PropTypes.bool,\n  onFlipEnd: PropTypes.func,\n  onFlipStart: PropTypes.func,\n  alignHeight: PropTypes.bool,\n  alignWidth: PropTypes.bool,\n  useNativeDriver: PropTypes.bool,\n  children (props, propName, componentName) {\n    const prop = props[propName]\n    if (React.Children.count(prop) !== 2) {\n      return new Error(\n        '`' + componentName + '` ' +\n        'should contain exactly two children. ' +\n        'The first child represents the front of the card. ' +\n        'The second child represents the back of the card.'\n      )\n    }\n  }\n}\n\nFlipCard.defaultProps = {\n  flip: false,\n  friction: 6,\n  perspective: 1000,\n  flipHorizontal: false,\n  flipVertical: true,\n  clickable: true,\n  onFlipEnd: () => {},\n  onFlipStart: () => {},\n  alignHeight: false,\n  alignWidth: false,\n  useNativeDriver: true,\n}\n\n\nexport class Face extends Component {\n  render () {\n    return (\n      <View\n        style={[S.face, this.props.style]}\n        onLayout={this.props.onLayout}\n      >\n        {this.props.children}\n      </View>\n    )\n  }\n}\n\nFace.propTypes = {\n  children (props, propName, componentName) {\n  }\n}\n\nexport class Back extends Component {\n  render () {\n    var transform = []\n    if (this.props.flipHorizontal) {\n      transform.push({scaleX: -1})\n      if (Platform.OS === \"android\") {\n        transform.push({perspective: this.props.perspective})\n      }\n    }\n    if (this.props.flipVertical) {\n      transform.push({scaleY: -1})\n      if (Platform.OS === \"android\") {\n        transform.push({perspective: this.props.perspective})\n      }\n    }\n\n    return (\n      <View\n      style={[\n        S.back,\n        this.props.style,\n        {transform: transform}\n        ]}\n        onLayout={this.props.onLayout}>\n        {this.props.children}\n      </View>\n    )\n  }\n}\n\nBack.defaultProps = {\n  flipHorizontal: false,\n  flipVertical: true,\n  perspective: 1000,\n}\n\nBack.propTypes = {\n  flipHorizontal: PropTypes.bool,\n  flipVertical: PropTypes.bool,\n  perspective: PropTypes.number,\n  children (props, propName, componentName) {\n  }\n}\n"]},"metadata":{},"sourceType":"module"}