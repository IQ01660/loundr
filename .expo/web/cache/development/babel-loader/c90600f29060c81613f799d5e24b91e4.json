{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RNS3 = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\"](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((typeof Symbol === \"function\" ? Symbol.iterator : \"@@iterator\") in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _Request = require(\"./Request\");\n\nvar _S3Policy = require(\"./S3Policy\");\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar AWS_DEFAULT_S3_HOST = 's3.amazonaws.com';\nvar EXPECTED_RESPONSE_KEY_VALUE_RE = {\n  key: /<Key>(.*)<\\/Key>/,\n  etag: /<ETag>\"?([^\"]*)\"?<\\/ETag>/,\n  bucket: /<Bucket>(.*)<\\/Bucket>/,\n  location: /<Location>(.*)<\\/Location>/\n};\n\nvar entries = function entries(o) {\n  return Object.keys(o).map(function (k) {\n    return [k, o[k]];\n  });\n};\n\nvar extractResponseValues = function extractResponseValues(responseText) {\n  return entries(EXPECTED_RESPONSE_KEY_VALUE_RE).reduce(function (result, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        regex = _ref2[1];\n\n    var match = responseText.match(regex);\n    return _extends({}, result, _defineProperty({}, key, match && match[1]));\n  }, {});\n};\n\nvar setBodyAsParsedXML = function setBodyAsParsedXML(response) {\n  return _extends({}, response, {\n    body: {\n      postResponse: response.text == null ? null : extractResponseValues(response.text)\n    }\n  });\n};\n\nvar RNS3 = exports.RNS3 = function () {\n  function RNS3() {\n    _classCallCheck(this, RNS3);\n  }\n\n  _createClass(RNS3, null, [{\n    key: 'put',\n    value: function put(file, options) {\n      options = _extends({}, options, {\n        key: (options.keyPrefix || '') + file.name,\n        date: new Date(),\n        contentType: file.type\n      });\n      var url = 'https://' + options.bucket + '.' + (options.awsUrl || AWS_DEFAULT_S3_HOST);\n      var method = \"POST\";\n\n      var policy = _S3Policy.S3Policy.generate(options);\n\n      return _Request.Request.create(url, method, policy).set(\"file\", file).send().then(setBodyAsParsedXML);\n    }\n  }]);\n\n  return RNS3;\n}();","map":{"version":3,"sources":["/Users/ikramgabiyev/react-native-workspace/loundr/node_modules/react-native-aws3/lib/RNS3.js"],"names":["Object","defineProperty","exports","value","RNS3","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","_Request","require","_S3Policy","_classCallCheck","instance","_defineProperty","obj","AWS_DEFAULT_S3_HOST","EXPECTED_RESPONSE_KEY_VALUE_RE","etag","bucket","location","entries","o","keys","map","k","extractResponseValues","responseText","reduce","result","_ref","_ref2","regex","match","setBodyAsParsedXML","response","body","postResponse","text","put","file","options","keyPrefix","name","date","Date","contentType","type","url","awsUrl","method","policy","S3Policy","generate","Request","create","set","send","then"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RNS3 = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * RNS3\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\n\nvar _Request = require('./Request');\n\nvar _S3Policy = require('./S3Policy');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar AWS_DEFAULT_S3_HOST = 's3.amazonaws.com';\n\nvar EXPECTED_RESPONSE_KEY_VALUE_RE = {\n  key: /<Key>(.*)<\\/Key>/,\n  etag: /<ETag>\"?([^\"]*)\"?<\\/ETag>/,\n  bucket: /<Bucket>(.*)<\\/Bucket>/,\n  location: /<Location>(.*)<\\/Location>/\n};\n\nvar entries = function entries(o) {\n  return Object.keys(o).map(function (k) {\n    return [k, o[k]];\n  });\n};\n\nvar extractResponseValues = function extractResponseValues(responseText) {\n  return entries(EXPECTED_RESPONSE_KEY_VALUE_RE).reduce(function (result, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        regex = _ref2[1];\n\n    var match = responseText.match(regex);\n    return _extends({}, result, _defineProperty({}, key, match && match[1]));\n  }, {});\n};\n\nvar setBodyAsParsedXML = function setBodyAsParsedXML(response) {\n  return _extends({}, response, {\n    body: { postResponse: response.text == null ? null : extractResponseValues(response.text) }\n  });\n};\n\nvar RNS3 = exports.RNS3 = function () {\n  function RNS3() {\n    _classCallCheck(this, RNS3);\n  }\n\n  _createClass(RNS3, null, [{\n    key: 'put',\n    value: function put(file, options) {\n      options = _extends({}, options, {\n        key: (options.keyPrefix || '') + file.name,\n        date: new Date(),\n        contentType: file.type\n      });\n\n      var url = 'https://' + options.bucket + '.' + (options.awsUrl || AWS_DEFAULT_S3_HOST);\n      var method = \"POST\";\n      var policy = _S3Policy.S3Policy.generate(options);\n\n      return _Request.Request.create(url, method, policy).set(\"file\", file).send().then(setBodyAsParsedXML);\n    }\n  }]);\n\n  return RNS3;\n}();"]},"metadata":{},"sourceType":"script"}