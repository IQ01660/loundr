{"ast":null,"code":"'use strict';var stripAnsi=require('strip-ansi');var socket=require(\"./socket\");var overlay=require(\"./overlay\");var _require=require(\"./utils/log\"),log=_require.log,setLogLevel=_require.setLogLevel;var sendMessage=require(\"./utils/sendMessage\");var reloadApp=require(\"./utils/reloadApp\");var createSocketUrl=require(\"./utils/createSocketUrl\");var status={isUnloading:false,currentHash:''};var options={hot:false,hotReload:true,liveReload:false,initial:true,useWarningOverlay:false,useErrorOverlay:false,useProgress:false};var socketUrl=createSocketUrl(__resourceQuery);self.addEventListener('beforeunload',function(){status.isUnloading=true;});if(typeof window!=='undefined'){var qs=window.location.search.toLowerCase();options.hotReload=qs.indexOf('hotreload=false')===-1;}var onSocketMessage={hot:function hot(){options.hot=true;log.info('[WDS] Hot Module Replacement enabled.');},liveReload:function liveReload(){options.liveReload=true;log.info('[WDS] Live Reloading enabled.');},invalid:function invalid(){log.info('[WDS] App updated. Recompiling...');if(options.useWarningOverlay||options.useErrorOverlay){overlay.clear();}sendMessage('Invalid');},hash:function hash(_hash){status.currentHash=_hash;},'still-ok':function stillOk(){log.info('[WDS] Nothing changed.');if(options.useWarningOverlay||options.useErrorOverlay){overlay.clear();}sendMessage('StillOk');},'log-level':function logLevel(level){var hotCtx=require.context('webpack/hot',false,/^\\.\\/log$/);if(hotCtx.keys().indexOf('./log')!==-1){hotCtx('./log').setLogLevel(level);}setLogLevel(level);},overlay:function overlay(value){if(typeof document!=='undefined'){if(typeof value==='boolean'){options.useWarningOverlay=false;options.useErrorOverlay=value;}else if(value){options.useWarningOverlay=value.warnings;options.useErrorOverlay=value.errors;}}},progress:function progress(_progress){if(typeof document!=='undefined'){options.useProgress=_progress;}},'progress-update':function progressUpdate(data){if(options.useProgress){log.info(\"[WDS] \".concat(data.percent,\"% - \").concat(data.msg,\".\"));}sendMessage('Progress',data);},ok:function ok(){sendMessage('Ok');if(options.useWarningOverlay||options.useErrorOverlay){overlay.clear();}if(options.initial){return options.initial=false;}reloadApp(options,status);},'content-changed':function contentChanged(){log.info('[WDS] Content base changed. Reloading...');self.location.reload();},warnings:function warnings(_warnings){log.warn('[WDS] Warnings while compiling.');var strippedWarnings=_warnings.map(function(warning){return stripAnsi(warning);});sendMessage('Warnings',strippedWarnings);for(var i=0;i<strippedWarnings.length;i++){log.warn(strippedWarnings[i]);}if(options.useWarningOverlay){overlay.showMessage(_warnings);}if(options.initial){return options.initial=false;}reloadApp(options,status);},errors:function errors(_errors){log.error('[WDS] Errors while compiling. Reload prevented.');var strippedErrors=_errors.map(function(error){return stripAnsi(error);});sendMessage('Errors',strippedErrors);for(var i=0;i<strippedErrors.length;i++){log.error(strippedErrors[i]);}if(options.useErrorOverlay){overlay.showMessage(_errors);}options.initial=false;},error:function error(_error){log.error(_error);},close:function close(){log.error('[WDS] Disconnected!');sendMessage('Close');}};socket(socketUrl,onSocketMessage);","map":{"version":3,"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/webpack-dev-server/client/index.js"],"names":["stripAnsi","require","socket","overlay","_require","log","setLogLevel","sendMessage","reloadApp","createSocketUrl","status","isUnloading","currentHash","options","hot","hotReload","liveReload","initial","useWarningOverlay","useErrorOverlay","useProgress","socketUrl","__resourceQuery","self","addEventListener","window","qs","location","search","toLowerCase","indexOf","onSocketMessage","info","invalid","clear","hash","_hash","stillOk","logLevel","level","hotCtx","context","keys","value","document","warnings","errors","progress","_progress","progressUpdate","data","concat","percent","msg","ok","contentChanged","reload","_warnings","warn","strippedWarnings","map","warning","i","length","showMessage","_errors","error","strippedErrors","_error","close"],"mappings":"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","sourcesContent":["'use strict';\n/* global __resourceQuery WorkerGlobalScope self */\n\n/* eslint prefer-destructuring: off */\n\nvar stripAnsi = require('strip-ansi');\n\nvar socket = require('./socket');\n\nvar overlay = require('./overlay');\n\nvar _require = require('./utils/log'),\n    log = _require.log,\n    setLogLevel = _require.setLogLevel;\n\nvar sendMessage = require('./utils/sendMessage');\n\nvar reloadApp = require('./utils/reloadApp');\n\nvar createSocketUrl = require('./utils/createSocketUrl');\n\nvar status = {\n  isUnloading: false,\n  currentHash: ''\n};\nvar options = {\n  hot: false,\n  hotReload: true,\n  liveReload: false,\n  initial: true,\n  useWarningOverlay: false,\n  useErrorOverlay: false,\n  useProgress: false\n};\nvar socketUrl = createSocketUrl(__resourceQuery);\nself.addEventListener('beforeunload', function () {\n  status.isUnloading = true;\n});\n\nif (typeof window !== 'undefined') {\n  var qs = window.location.search.toLowerCase();\n  options.hotReload = qs.indexOf('hotreload=false') === -1;\n}\n\nvar onSocketMessage = {\n  hot: function hot() {\n    options.hot = true;\n    log.info('[WDS] Hot Module Replacement enabled.');\n  },\n  liveReload: function liveReload() {\n    options.liveReload = true;\n    log.info('[WDS] Live Reloading enabled.');\n  },\n  invalid: function invalid() {\n    log.info('[WDS] App updated. Recompiling...'); // fixes #1042. overlay doesn't clear if errors are fixed but warnings remain.\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    sendMessage('Invalid');\n  },\n  hash: function hash(_hash) {\n    status.currentHash = _hash;\n  },\n  'still-ok': function stillOk() {\n    log.info('[WDS] Nothing changed.');\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    sendMessage('StillOk');\n  },\n  'log-level': function logLevel(level) {\n    var hotCtx = require.context('webpack/hot', false, /^\\.\\/log$/);\n\n    if (hotCtx.keys().indexOf('./log') !== -1) {\n      hotCtx('./log').setLogLevel(level);\n    }\n\n    setLogLevel(level);\n  },\n  overlay: function overlay(value) {\n    if (typeof document !== 'undefined') {\n      if (typeof value === 'boolean') {\n        options.useWarningOverlay = false;\n        options.useErrorOverlay = value;\n      } else if (value) {\n        options.useWarningOverlay = value.warnings;\n        options.useErrorOverlay = value.errors;\n      }\n    }\n  },\n  progress: function progress(_progress) {\n    if (typeof document !== 'undefined') {\n      options.useProgress = _progress;\n    }\n  },\n  'progress-update': function progressUpdate(data) {\n    if (options.useProgress) {\n      log.info(\"[WDS] \".concat(data.percent, \"% - \").concat(data.msg, \".\"));\n    }\n\n    sendMessage('Progress', data);\n  },\n  ok: function ok() {\n    sendMessage('Ok');\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    if (options.initial) {\n      return options.initial = false;\n    } // eslint-disable-line no-return-assign\n\n\n    reloadApp(options, status);\n  },\n  'content-changed': function contentChanged() {\n    log.info('[WDS] Content base changed. Reloading...');\n    self.location.reload();\n  },\n  warnings: function warnings(_warnings) {\n    log.warn('[WDS] Warnings while compiling.');\n\n    var strippedWarnings = _warnings.map(function (warning) {\n      return stripAnsi(warning);\n    });\n\n    sendMessage('Warnings', strippedWarnings);\n\n    for (var i = 0; i < strippedWarnings.length; i++) {\n      log.warn(strippedWarnings[i]);\n    }\n\n    if (options.useWarningOverlay) {\n      overlay.showMessage(_warnings);\n    }\n\n    if (options.initial) {\n      return options.initial = false;\n    } // eslint-disable-line no-return-assign\n\n\n    reloadApp(options, status);\n  },\n  errors: function errors(_errors) {\n    log.error('[WDS] Errors while compiling. Reload prevented.');\n\n    var strippedErrors = _errors.map(function (error) {\n      return stripAnsi(error);\n    });\n\n    sendMessage('Errors', strippedErrors);\n\n    for (var i = 0; i < strippedErrors.length; i++) {\n      log.error(strippedErrors[i]);\n    }\n\n    if (options.useErrorOverlay) {\n      overlay.showMessage(_errors);\n    }\n\n    options.initial = false;\n  },\n  error: function error(_error) {\n    log.error(_error);\n  },\n  close: function close() {\n    log.error('[WDS] Disconnected!');\n    sendMessage('Close');\n  }\n};\nsocket(socketUrl, onSocketMessage);"]},"metadata":{},"sourceType":"script"}